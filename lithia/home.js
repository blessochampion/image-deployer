"use strict";(()=>{var y=r=>{let t="?";for(let[e,o]of Object.entries(r))o&&(t+=`${e}=${o}&`);return encodeURI(t)};var s="data",i={positionsCount:`[${s}=positions-count]`,viewOpportunities:`[${s}=view-opportunities]`,usLoadAll:`[${s}=us-load-all-container]`,count:`[${s}=count]`,locationCount:`[${s}=location-count]`,locationInput:`[${s}=location-input]`,titleInput:`[${s}=title-input]`,searchButton:`[${s}=search-btn]`,name:`[${s}=name]`,input:`[${s}=input]`,checkbox:`[${s}=checkbox]`,loadMore:`[${s}=load-more]`,title:`[${s}=title]`,time:`[${s}=time]`,location:`[${s}=location]`,description:`[${s}=description]`,jobRequisitionId:`[${s}=job-requisition-id]`,subCategory:r=>`[${s}-sub-category="${r}"]`},a={dataChecked:"data-checked",checkedClass:"w--redirected-checked"};var b={location:r=>r.State||"",title:r=>r.title||""},S="https://cors-middleware.lithia.workers.dev/";var p=class{constructor(t,e){this.container=t;this.data=e;this.searchItems=[];this.bindData()}getSelectedItems(){return this.searchItems.filter(t=>t.hasAttribute(a.dataChecked)).map(t=>t.querySelector(i.name)?.textContent||"")}filterJobs(t,e){let o=this.getSelectedItems();return o.length===0?t:t.filter(n=>o.includes(e(n)||""))}reset(){this.searchItems.forEach(t=>{t.removeAttribute(a.dataChecked);let e=t.querySelector("div");e&&e.classList.remove(a.checkedClass)})}bindData(){let[t,e]=this.container.childNodes;for(;this.container.childNodes.length>1;){let o=this.container.lastChild;o&&this.container.removeChild(o)}!t||!e||(this.searchInput=t.querySelector("input"),this.generateListItems(e),this.handleSearch())}generateListItems(t){this.listItem=t.cloneNode(!0),this.data.forEach(e=>{let o=this.createListItem();if(!o)return;let n=o.querySelector(i.name);n&&(n.textContent=e),this.handleItemClick(o),this.container.appendChild(o),this.searchItems.push(o)})}handleItemClick(t){t.addEventListener("click",e=>{let o=t.querySelector("div"),n=!1;o&&(n=!o.classList.contains(a.checkedClass),n?t.setAttribute(a.dataChecked,n.toString()):t.removeAttribute(a.dataChecked)),e.stopPropagation()})}createListItem(){return!this.searchInput||!this.listItem?void 0:this.listItem.cloneNode(!0)}handleSearch(){this.searchInput&&(this.searchInput.addEventListener("click",t=>{t.stopPropagation()}),this.searchInput.addEventListener("input",()=>{let t=this.searchInput?.value.toLowerCase();this.searchItems.forEach(e=>{if(!t){e.style.display="block";return}let o=e.querySelector(i.name);if(o){let n=o.textContent?.toLowerCase();n&&n.includes(t||"")?e.style.display="block":e.style.display="none"}})}))}};var E=r=>{let t=r.filter(e=>e.State).map(e=>e.State||"");return Array.from(new Set(t)).sort()},v=r=>{let t=r.filter(e=>e.title).map(e=>e.title||"");return Array.from(new Set(t)).sort()};var g=(r,t)=>{let e=document.querySelector(i.locationInput),o=E(r),n;e&&o&&(n=new p(e,o));let u=document.querySelector(i.titleInput),d=v(r),l;u&&d&&(l=new p(u,d));let L=m=>{let c=m;return n&&(c=n.filterJobs(c,b.location)),l&&(c=l.filterJobs(c,b.title)),c},f=document.querySelector(i.searchButton);f&&f.addEventListener("click",()=>{let m=n?.getSelectedItems()||[],c=l?.getSelectedItems()||[];t(L(r),{selectedLocations:m,selectedTitles:c})})};var C=(r,t="",e=document.body)=>{e.querySelectorAll(i.positionsCount).forEach(n=>{n.textContent=r.toLocaleString()+t})};var h=class{constructor(){this.jobs=null}async fetchJobs(){if(this.jobs)return Promise.resolve(this.jobs);let{Report_Entry:t}=await this.fetchJobsFromAPI()||{};return t&&(this.jobs=t),Promise.resolve(this.jobs)}async fetchJobsFromAPI(){try{return await(await fetch(`${S}jobs`)).json()}catch(t){return console.error("Error fetching jobs",t),null}}};window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{let t=await new h().fetchJobs();if(t){C(t.length),g(t,(e,o)=>{let{selectedLocations:n,selectedTitles:u}=o;if(!n.length&&!u.length)return;let d={location:n.join(","),title:u.join(",")},l=y(d);window.location.href=`/opportunities${l}`});return}console.error("Error fetching jobs")});})();
