"use strict";(()=>{var s="data",r={positionsCount:`[${s}=positions-count]`,viewOpportunities:`[${s}=view-opportunities]`,usLoadAll:`[${s}=us-load-all-container]`,count:`[${s}=count]`,locationCount:`[${s}=location-count]`,locationInput:`[${s}=location-input]`,titleInput:`[${s}=title-input]`,searchButton:`[${s}=search-btn]`,name:`[${s}=name]`,input:`[${s}=input]`,checkbox:`[${s}=checkbox]`,loadMore:`[${s}=load-more]`,title:`[${s}=title]`,time:`[${s}=time]`,location:`[${s}=location]`,description:`[${s}=description]`,jobRequisitionId:`[${s}=job-requisition-id]`,subCategory:o=>`[${s}-sub-category="${o}"]`},p={dataChecked:"data-checked",checkedClass:"w--redirected-checked"};var y={location:o=>o.State||"",title:o=>o.title||""},g="https://cors-middleware.lithia.workers.dev/";var C=(o,t="",e=document.body)=>{e.querySelectorAll(r.positionsCount).forEach(i=>{i.textContent=o.toLocaleString()+t})};var w=o=>{let t=o.filter(e=>e.State).map(e=>e.State||"");return Array.from(new Set(t)).sort()},J=o=>{let t=o.filter(e=>e.title).map(e=>e.title||"");return Array.from(new Set(t)).sort()},I=o=>{let t=new URL(window.location.href),e=new URLSearchParams;for(let[n,i]of Object.entries(o))i&&e.set(n,i);t.search=e.toString(),window.history.pushState({},"",t.href)},x=(o,t=100)=>o.length>100?o.substring(0,t)+"...":o;var S=o=>{o.sort((l,u)=>(l.title||"").localeCompare(u.title||"")),C(o.length," opportunities");let t=document.getElementById("jobs-component"),e=window.jobTemplate||t.childNodes[0].cloneNode(!0);e.style.display="none";let n=new DOMParser;$("#jobs-component").parent().pagination({dataSource:o,pageSize:10,activeClassName:"active-nav",inlineStyle:!1,callback:function(l){t.innerHTML="",l.forEach(u=>{let c=e.cloneNode(!0);c.style.display="block",t.appendChild(c);let{title:f,jobDescription:h,timeType:d,State:a,City:M,jobRequisitionId:j}=u,E=c.querySelector(r.title);E&&(E.innerHTML=f||"");let T=c.querySelector(r.description);T&&(T.innerHTML=x(n.parseFromString(h||"","text/html").body.innerText));let L=c.querySelector(r.time);L&&(L.innerHTML=d||"");let v=c.querySelector(r.location);v&&(v.innerHTML=`${M||""} ${a?",":""} ${a||""}`),c.addEventListener("click",()=>{window.location.href=`${window.location.origin}/listing?id=${j}`})})}})};var m=class{constructor(t,e){this.container=t;this.data=e;this.searchItems=[];this.bindData()}getSelectedItems(){return this.searchItems.filter(t=>t.hasAttribute(p.dataChecked)).map(t=>t.querySelector(r.name)?.textContent||"")}filterJobs(t,e){let n=this.getSelectedItems();return n.length===0?t:t.filter(i=>n.includes(e(i)||""))}reset(){this.searchItems.forEach(t=>{t.removeAttribute(p.dataChecked);let e=t.querySelector("div");e&&e.classList.remove(p.checkedClass)})}bindData(){let[t,e]=this.container.childNodes;for(;this.container.childNodes.length>1;){let n=this.container.lastChild;n&&this.container.removeChild(n)}!t||!e||(this.searchInput=t.querySelector("input"),this.generateListItems(e),this.handleSearch())}generateListItems(t){this.listItem=t.cloneNode(!0),this.data.forEach(e=>{let n=this.createListItem();if(!n)return;let i=n.querySelector(r.name);i&&(i.textContent=e),this.handleItemClick(n),this.container.appendChild(n),this.searchItems.push(n)})}handleItemClick(t){t.addEventListener("click",e=>{let n=t.querySelector("div"),i=!1;n&&(i=!n.classList.contains(p.checkedClass),i?t.setAttribute(p.dataChecked,i.toString()):t.removeAttribute(p.dataChecked)),e.stopPropagation()})}createListItem(){return!this.searchInput||!this.listItem?void 0:this.listItem.cloneNode(!0)}handleSearch(){this.searchInput&&(this.searchInput.addEventListener("click",t=>{t.stopPropagation()}),this.searchInput.addEventListener("input",()=>{let t=this.searchInput?.value.toLowerCase();this.searchItems.forEach(e=>{if(!t){e.style.display="block";return}let n=e.querySelector(r.name);if(n){let i=n.textContent?.toLowerCase();i&&i.includes(t||"")?e.style.display="block":e.style.display="none"}})}))}};var k=(o,t)=>{let e=document.querySelector(r.locationInput),n=w(o),i;e&&n&&(i=new m(e,n));let l=document.querySelector(r.titleInput),u=J(o),c;l&&u&&(c=new m(l,u));let f=d=>{let a=d;return i&&(a=i.filterJobs(a,y.location)),c&&(a=c.filterJobs(a,y.title)),a},h=document.querySelector(r.searchButton);h&&h.addEventListener("click",()=>{let d=i?.getSelectedItems()||[],a=c?.getSelectedItems()||[];t(f(o),{selectedLocations:d,selectedTitles:a})})};var b=class{constructor(){this.jobs=null}async fetchJobs(){if(this.jobs)return Promise.resolve(this.jobs);let{Report_Entry:t}=await this.fetchJobsFromAPI()||{};return t&&(this.jobs=t),Promise.resolve(this.jobs)}async fetchJobsFromAPI(){try{return await(await fetch(`${g}jobs`)).json()}catch(t){return console.error("Error fetching jobs",t),null}}};window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{let t=await new b().fetchJobs();if(t){k(t,(e,n)=>{let{selectedLocations:i,selectedTitles:l}=n;I({location:i.join(","),title:l.join(",")}),S(e)}),S(t);return}console.error("Error fetching jobs")});})();
